<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jenkins Pipelnes &mdash; boomi-cicd-cli-py 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modules" href="../modules/modules.html" />
    <link rel="prev" title="GitHub Actions" href="github-actions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            boomi-cicd-cli-py
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example-scripts/example-cicd-scripts.html">Example CICD Scripts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="release-pipeline-configuration.html">Release Pipeline Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="azure-devops.html">Azure DevOps Release Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="github-actions.html">GitHub Actions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Jenkins Pipelnes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#jenkins-pipeline-setup">1 Jenkins Pipeline Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-requisites">1.1 Pre-requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-jenkins-pipeline">1.2 Create new Jenkins Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-jenkins-credentials">1.3 Create Jenkins Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-jenkins-pipeline">1.4 Run the Jenkins Pipeline</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules.html">Modules</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">boomi-cicd-cli-py</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="release-pipeline-configuration.html">Release Pipeline Configuration</a></li>
      <li class="breadcrumb-item active">Jenkins Pipelnes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pipelines/jenkins.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="jenkins-pipelnes">
<h1>Jenkins Pipelnes<a class="headerlink" href="#jenkins-pipelnes" title="Permalink to this heading"></a></h1>
<section id="jenkins-pipeline-setup">
<h2>1 Jenkins Pipeline Setup<a class="headerlink" href="#jenkins-pipeline-setup" title="Permalink to this heading"></a></h2>
<p>The Jenkins Pipeline is configured to promote Boomi packaged components from Development, to Stage, and to Production with a manual approval step before Stage and before Production.</p>
</section>
<section id="pre-requisites">
<h2>1.1 Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Jenkins 2.x.x (tested with 2.401.2)</p></li>
<li><p>Jenkins Pipeline Plugin (tested with 1223.v41b_0279c361a)</p></li>
<li><p>Python 4.11</p></li>
<li><p>Pip for Python 4.11 installed</p></li>
</ul>
</section>
<section id="create-new-jenkins-pipeline">
<h2>1.2 Create new Jenkins Pipeline<a class="headerlink" href="#create-new-jenkins-pipeline" title="Permalink to this heading"></a></h2>
<p>Within Jenkins, create a new pipeline by creating a new item and selecting “Pipeline” as the type. Do not include spaces within the name of the pipeline because the script does not handle spaces. This example uses ‘boomi-cicd-pipeline’ as the name of the pipeline.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/jenkins-new-item.png"><img alt="../_images/jenkins-new-item.png" src="../_images/jenkins-new-item.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 1. Jenkins New Item Icon</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/jenkins-new-pipeline.png"><img alt="../_images/jenkins-new-pipeline.png" src="../_images/jenkins-new-pipeline.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 2. Select Pipeline as the New Item</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Provide a description for the pipeline. Then scroll down to Pipelines, select Defintion as Pipeline Script, and paste the <a class="reference external" href="https://bitbucket.org/officialboomi/boomi-cicd-cli-py/src/main/boomi_cicd/templates/jenkin/jenkinsPipeline.jenkinsfile">contents of the Jenkinsfile</a>. into the Script section. The script is specific to an installation of Python 3.11. Please be aware that how the release_pipeline.py script is executed might be slightly different in your environment.</p>
<p>The following values within the Jenkinsfile must be updated to match your environment:</p>
<table class="docutils align-center" id="id3" style="width: 100%">
<caption><span class="caption-text">Table 1. Jenkins Pipeline Variables</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Jenkinsfile Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOOMI_ACCOUNT_ID</p></td>
<td><p>The account ID of the Boomi account that you want to deploy to.</p></td>
</tr>
<tr class="row-odd"><td><p>BOOMI_ENVIRONMENT</p></td>
<td><p>The name of the Boomi environment that you want to deploy to.</p></td>
</tr>
<tr class="row-even"><td><p>credentials(‘atomsphere-api’)</p></td>
<td><p>The name of the Jenkins credential that contains the Boomi
AtomSphere API key.</p></td>
</tr>
<tr class="row-odd"><td><p>git url for the boomi-cicd-cli-py repository</p></td>
<td><p>The URL of the repository that contains the Boomi CICD CLI
Python library. It is recommended to clone the officialboomi
Bitbucket repository and use a repository that you control.</p></td>
</tr>
<tr class="row-even"><td><p>Credentials for boomi-cicd-cli-py repository</p></td>
<td><p>The name of the Jenkins credentials id that contains the username
and password for the repository that contains the Boomi CICD CLI
Python library. This is only required if the repository is
private.</p></td>
</tr>
<tr class="row-odd"><td><p>git url for the boomi-release reposity</p></td>
<td><p>The URL of the repository that contains the Boomi Release JSON
file.</p></td>
</tr>
<tr class="row-even"><td><p>Credentials for boomi-release repository</p></td>
<td><p>The name of the Jenkins credentials id that contains the username
and password for the repository that contains the Boomi CICD CLI
Python library. This is only required if the repository is
private.</p></td>
</tr>
</tbody>
</table>
<p>Update the BOOMI_ACCOUNT_ID at top environment variables section of the Jenkinsfile with your account ID. Then update BOOMI_ENVIRONMENT_NAME within the stages that are used to deploy. This pipeline is an example pipeline. You can modify the pipeline to meet your needs. Once complete, click Save.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/jenkins-general-description.png"><img alt="../_images/jenkins-general-description.png" src="../_images/jenkins-general-description.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 3. Set the Pipeline Description</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/jenkins-pipeline-definition.png"><img alt="../_images/jenkins-pipeline-definition.png" src="../_images/jenkins-pipeline-definition.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 4. Set the Pipeline Definition</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Jenkin’s Pipeline Script located within the template directory of the Boomi CICD CLI Python library.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="n">pipeline</span> <span class="p">{</span>
<span class="linenos">  2</span>    <span class="n">agent</span> <span class="nb">any</span>
<span class="linenos">  3</span>    <span class="n">environment</span> <span class="p">{</span>
<span class="linenos">  4</span>        <span class="n">BOOMI_ACCOUNT_ID</span> <span class="o">=</span> <span class="s1">&#39;&lt;add-account-id&gt;&#39;</span>
<span class="linenos">  5</span>        <span class="n">BOOMI_BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;https://api.boomi.com/api/rest/v1&#39;</span>
<span class="linenos">  6</span>        <span class="n">BOOMI_CLI_REPO</span> <span class="o">=</span> <span class="s1">&#39;boomi-cicd-cli-py&#39;</span>
<span class="linenos">  7</span>        <span class="n">BOOMI_RELEASE_REPO</span> <span class="o">=</span> <span class="s1">&#39;boomi-cicd-release&#39;</span>
<span class="linenos">  8</span>        <span class="n">BOOMI_RELEASE_FILE</span> <span class="o">=</span> <span class="s1">&#39;release/release.json&#39;</span>
<span class="linenos">  9</span>        <span class="n">BOOMI_CREDS</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">(</span><span class="s1">&#39;atomsphere-api&#39;</span><span class="p">)</span>
<span class="linenos"> 10</span>
<span class="linenos"> 11</span>    <span class="p">}</span>
<span class="linenos"> 12</span>    <span class="n">stages</span> <span class="p">{</span>
<span class="linenos"> 13</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Git clone boomi-cicd-cli-pi repo&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 14</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos"> 15</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos"> 16</span>                    <span class="k">def</span> <span class="nf">CURRENT_DIRECTORY</span> <span class="o">=</span> <span class="n">pwd</span><span class="p">()</span>
<span class="linenos"> 17</span>                    <span class="n">env</span><span class="o">.</span><span class="n">BOOMI_CLI_BASE_DIR</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{CURRENT_DIRECTORY}</span><span class="s2">/$</span><span class="si">{env.BOOMI_CLI_REPO}</span><span class="s2">&quot;</span>
<span class="linenos"> 18</span>                    <span class="n">echo</span> <span class="s2">&quot;BOOMI_CLI_BASE_DIR: $</span><span class="si">{env.BOOMI_CLI_BASE_DIR}</span><span class="s2">&quot;</span>
<span class="linenos"> 19</span>                <span class="p">}</span>
<span class="linenos"> 20</span>                <span class="nb">dir</span><span class="p">(</span><span class="s2">&quot;$</span><span class="si">{env.BOOMI_CLI_BASE_DIR}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 21</span>                    <span class="n">git</span> <span class="n">url</span><span class="p">:</span> <span class="s1">&#39;&lt;add-url-git-repo&gt;/boomi-cicd-cli-py.git&#39;</span><span class="p">,</span>
<span class="linenos"> 22</span>                        <span class="n">credentialsId</span><span class="p">:</span> <span class="s1">&#39;&lt;add-jenkins-credentials-id&gt;&#39;</span><span class="p">,</span>
<span class="linenos"> 23</span>                        <span class="n">branch</span><span class="p">:</span> <span class="s1">&#39;dev&#39;</span>
<span class="linenos"> 24</span>                <span class="p">}</span>
<span class="linenos"> 25</span>            <span class="p">}</span>
<span class="linenos"> 26</span>        <span class="p">}</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Git clone boomi-cicd-release repo&#39;</span><span class="p">){</span>
<span class="linenos"> 29</span>             <span class="n">steps</span> <span class="p">{</span>
<span class="linenos"> 30</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos"> 31</span>                    <span class="k">def</span> <span class="nf">CURRENT_DIRECTORY</span> <span class="o">=</span> <span class="n">pwd</span><span class="p">()</span>
<span class="linenos"> 32</span>                    <span class="n">env</span><span class="o">.</span><span class="n">BOOMI_RELEASE_BASE_DIR</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{CURRENT_DIRECTORY}</span><span class="s2">/$</span><span class="si">{env.BOOMI_RELEASE_REPO}</span><span class="s2">&quot;</span>
<span class="linenos"> 33</span>                    <span class="n">echo</span> <span class="s2">&quot;BOOMI_RELEASE_BASE_DIR: $</span><span class="si">{env.BOOMI_RELEASE_BASE_DIR}</span><span class="s2">&quot;</span>
<span class="linenos"> 34</span>                <span class="p">}</span>
<span class="linenos"> 35</span>                <span class="nb">dir</span><span class="p">(</span><span class="s2">&quot;$</span><span class="si">{env.BOOMI_RELEASE_BASE_DIR}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 36</span>                    <span class="n">git</span> <span class="n">url</span><span class="p">:</span> <span class="s1">&#39;&lt;add-url-git-repo&gt;/boomi-cicd-release.git&#39;</span><span class="p">,</span>
<span class="linenos"> 37</span>                        <span class="n">credentialsId</span><span class="p">:</span> <span class="s1">&#39;&lt;add-jenkins-credentials-id&gt;&#39;</span><span class="p">,</span>
<span class="linenos"> 38</span>                        <span class="n">branch</span><span class="p">:</span> <span class="s1">&#39;master&#39;</span>
<span class="linenos"> 39</span>                <span class="p">}</span>
<span class="linenos"> 40</span>            <span class="p">}</span>
<span class="linenos"> 41</span>        <span class="p">}</span>
<span class="linenos"> 42</span>
<span class="linenos"> 43</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Boomi CICD Pipeline DEV&#39;</span><span class="p">){</span>
<span class="linenos"> 44</span>            <span class="n">environment</span> <span class="p">{</span>
<span class="linenos"> 45</span>                <span class="n">BOOMI_ENVIRONMENT_NAME</span> <span class="o">=</span> <span class="s1">&#39;add-dev-environment-name&#39;</span>
<span class="linenos"> 46</span>            <span class="p">}</span>
<span class="linenos"> 47</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos"> 48</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos"> 49</span>                    <span class="n">env</span><span class="o">.</span><span class="n">BOOMI_USERNAME</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{env.BOOMI_CREDS_USR}</span><span class="s2">&quot;</span>
<span class="linenos"> 50</span>                    <span class="n">env</span><span class="o">.</span><span class="n">BOOMI_PASSWORD</span> <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{env.BOOMI_CREDS_PSW}</span><span class="s2">&quot;</span>
<span class="linenos"> 51</span>                    <span class="n">sh</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 52</span><span class="s1">                        # Create a vitual environment and activate</span>
<span class="linenos"> 53</span><span class="s1">                        python3.11 -m venv $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv</span>
<span class="linenos"> 54</span><span class="s1">                        source $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv/bin/activate</span>
<span class="linenos"> 55</span><span class="s1">                        python3.11 -m pip install --upgrade pip</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="s1">                        # Install required libraries</span>
<span class="linenos"> 58</span><span class="s1">                        pip install -r $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/requirements.txt</span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span><span class="s1">                        export PYTHONPATH=$</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos"> 61</span><span class="s1">                        cd $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos"> 62</span><span class="s1">                        python3.11 boomi_cicd/scripts/release_pipeline.py</span>
<span class="linenos"> 63</span><span class="s1">                    &#39;&#39;&#39;</span>
<span class="linenos"> 64</span>                <span class="p">}</span>
<span class="linenos"> 65</span>            <span class="p">}</span>
<span class="linenos"> 66</span>        <span class="p">}</span>
<span class="linenos"> 67</span>
<span class="linenos"> 68</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Stage Deployment Approval&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 69</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos"> 70</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos"> 71</span>                    <span class="nb">input</span> <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Approve deployment to Stage environment?&#39;</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="s1">&#39;Approve&#39;</span>
<span class="linenos"> 72</span>                <span class="p">}</span>
<span class="linenos"> 73</span>            <span class="p">}</span>
<span class="linenos"> 74</span>        <span class="p">}</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Boomi CICD Pipeline STG&#39;</span><span class="p">){</span>
<span class="linenos"> 78</span>            <span class="n">environment</span> <span class="p">{</span>
<span class="linenos"> 79</span>                <span class="n">BOOMI_ENVIRONMENT_NAME</span> <span class="o">=</span> <span class="s1">&#39;add-stage-environment-name&#39;</span>
<span class="linenos"> 80</span>            <span class="p">}</span>
<span class="linenos"> 81</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos"> 82</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos"> 83</span>                    <span class="n">sh</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="linenos"> 84</span><span class="s1">                        # Create a vitual environment and activate</span>
<span class="linenos"> 85</span><span class="s1">                        python3.11 -m venv $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv</span>
<span class="linenos"> 86</span><span class="s1">                        source $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv/bin/activate</span>
<span class="linenos"> 87</span><span class="s1">                        python3.11 -m pip install --upgrade pip</span>
<span class="linenos"> 88</span>
<span class="linenos"> 89</span><span class="s1">                        # Install required libraries</span>
<span class="linenos"> 90</span><span class="s1">                        pip install -r $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/requirements.txt</span>
<span class="linenos"> 91</span>
<span class="linenos"> 92</span><span class="s1">                        export PYTHONPATH=$</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos"> 93</span><span class="s1">                        cd $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos"> 94</span><span class="s1">                        python3.11 boomi_cicd/scripts/release_pipeline.py</span>
<span class="linenos"> 95</span><span class="s1">                    &#39;&#39;&#39;</span>
<span class="linenos"> 96</span>                <span class="p">}</span>
<span class="linenos"> 97</span>            <span class="p">}</span>
<span class="linenos"> 98</span>        <span class="p">}</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Production Deployment Approval&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">101</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos">102</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos">103</span>                    <span class="nb">input</span> <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;Approve deployment to Production environment?&#39;</span><span class="p">,</span> <span class="n">ok</span><span class="p">:</span> <span class="s1">&#39;Approve&#39;</span>
<span class="linenos">104</span>                <span class="p">}</span>
<span class="linenos">105</span>            <span class="p">}</span>
<span class="linenos">106</span>        <span class="p">}</span>
<span class="linenos">107</span>
<span class="linenos">108</span>
<span class="linenos">109</span>        <span class="n">stage</span><span class="p">(</span><span class="s1">&#39;Boomi CICD Pipeline PROD&#39;</span><span class="p">){</span>
<span class="linenos">110</span>            <span class="n">environment</span> <span class="p">{</span>
<span class="linenos">111</span>                <span class="n">BOOMI_ENVIRONMENT_NAME</span> <span class="o">=</span> <span class="s1">&#39;add-prod-environment-name&#39;</span>
<span class="linenos">112</span>            <span class="p">}</span>
<span class="linenos">113</span>            <span class="n">steps</span> <span class="p">{</span>
<span class="linenos">114</span>                <span class="n">script</span> <span class="p">{</span>
<span class="linenos">115</span>                    <span class="n">sh</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">116</span><span class="s1">                        # Create a vitual environment and activate</span>
<span class="linenos">117</span><span class="s1">                        python3.11 -m venv $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv</span>
<span class="linenos">118</span><span class="s1">                        source $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/venv/bin/activate</span>
<span class="linenos">119</span><span class="s1">                        python3.11 -m pip install --upgrade pip</span>
<span class="linenos">120</span>
<span class="linenos">121</span><span class="s1">                        # Install required libraries</span>
<span class="linenos">122</span><span class="s1">                        pip install -r $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span><span class="s1">/requirements.txt</span>
<span class="linenos">123</span>
<span class="linenos">124</span><span class="s1">                        export PYTHONPATH=$</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos">125</span><span class="s1">                        cd $</span><span class="si">{BOOMI_CLI_BASE_DIR}</span>
<span class="linenos">126</span><span class="s1">                        python3.11 boomi_cicd/scripts/release_pipeline.py</span>
<span class="linenos">127</span><span class="s1">                    &#39;&#39;&#39;</span>
<span class="linenos">128</span>                <span class="p">}</span>
<span class="linenos">129</span>            <span class="p">}</span>
<span class="linenos">130</span>        <span class="p">}</span>
<span class="linenos">131</span>    <span class="p">}</span>
<span class="linenos">132</span>    <span class="n">post</span> <span class="p">{</span>
<span class="linenos">133</span>        <span class="n">always</span> <span class="p">{</span>
<span class="linenos">134</span>            <span class="n">deleteDir</span><span class="p">()</span>
<span class="linenos">135</span>        <span class="p">}</span>
<span class="linenos">136</span>    <span class="p">}</span>
<span class="linenos">137</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="create-jenkins-credentials">
<h2>1.3 Create Jenkins Credentials<a class="headerlink" href="#create-jenkins-credentials" title="Permalink to this heading"></a></h2>
<p>Next create the Jenkins credentials that are used by the pipeline. A set of credentisl are required for the Atomsphere API and another set of credentials are required for the git repositories that contains the Boomi CICD CLI Python library and the release json. If the git repository is public, then the credentials are not required.</p>
<p>To navigate to the Jenkins credentials, click on the user name in the top right, and then click on Credentials in the left panel. Create a new set of credentials by click on Sysmte and then Global credentials (unrestricted). Then click Add Credentials.</p>
<table class="docutils align-center" id="id6">
<caption><span class="caption-text">Table 2. Jenkins Credentials</span><a class="headerlink" href="#id6" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Kind</p></td>
<td><p>Username with password</p></td>
</tr>
<tr class="row-odd"><td><p>Scope</p></td>
<td><p>Global</p></td>
</tr>
<tr class="row-even"><td><p>Username</p></td>
<td><p>BOOMI_TOKEN.&lt;boomi-username&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>Password</p></td>
<td><p>Boomi AtomSphere API Key</p></td>
</tr>
<tr class="row-even"><td><p>ID</p></td>
<td><p>atomsphere-api</p></td>
</tr>
<tr class="row-odd"><td><p>Description</p></td>
<td><p>Username and password of Boomi Service Account.</p></td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../_images/jenkins-new-credentials.png"><img alt="../_images/jenkins-new-credentials.png" src="../_images/jenkins-new-credentials.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 5. Create new Jenkins Credentials for Atomsphere API.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../_images/jenkins-completed-credentials.png"><img alt="../_images/jenkins-completed-credentials.png" src="../_images/jenkins-completed-credentials.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 6. Jenkins Credentials for Atomsphere API and a single git repository.</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="run-the-jenkins-pipeline">
<h2>1.4 Run the Jenkins Pipeline<a class="headerlink" href="#run-the-jenkins-pipeline" title="Permalink to this heading"></a></h2>
<p>Once complete, navigate back to the boomi-cicd-pipelilne and click on Build now. The pipeline will start and initially deploy to the Boomi Development environment. The pipeline has approval steps that require manual intervention before deploying to Stage and before Production.</p>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../_images/jenkins-build.png"><img alt="../_images/jenkins-build.png" src="../_images/jenkins-build.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 7. Build the Jenkins Pipeline.</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="github-actions.html" class="btn btn-neutral float-left" title="GitHub Actions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../modules/modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Boomi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>